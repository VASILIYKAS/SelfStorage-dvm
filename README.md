

# SelfStorage-dvm
[![Ask DeepWiki](https://devin.ai/assets/askdeepwiki.png)](https://deepwiki.com/VASILIYKAS/SelfStorage-dvm)

SelfStorage-dvm — это полнофункциональное веб-приложение на основе Django для управления складскими помещениями самообслуживания. Платформа предоставляет удобный интерфейс для клиентов, позволяющий просматривать, арендовать и управлять складскими боксами, а также для персонала — контролировать операции.

## Основные возможности

* **Управление пользователями**: Пользовательская модель с аутентификацией по email, регистрацией и управлением профилем.
* **Каталог складов и боксов**: Администраторы могут управлять несколькими складскими объектами с указанием характеристик, таких как адрес, температура и количество доступных боксов.
* **Система аренды боксов**: Пользователи могут просматривать доступные боксы, фильтровать их по размеру и оформлять аренду онлайн.
* **Личный кабинет ("Моя аренда")**: Аутентифицированные пользователи могут просматривать активные аренды, сроки аренды и получать доступ к арендованным боксам.
* **Доступ по QR-коду**: Для каждого арендованного бокса генерируется уникальный QR-код, позволяющий пользователю "открывать" бокс с помощью цифрового ключа.
* **Управление вещами и доставкой**: Пользователи могут указывать хранимые предметы и заказывать доставку своих вещей.
* **Скидки и промокоды**: Система для применения промокодов для получения скидок на аренду.
* **Автоматические уведомления по email**: Планировщик задач отправляет автоматические напоминания о предстоящем истечении срока аренды (за 30, 14, 7, 3 дня) и уведомления о просрочке.
* **Портал для персонала**: Специальный интерфейс для сотрудников, позволяющий отслеживать все заказы клиентов и их статусы.
* **Интеграция с Django Admin**: Полнофункциональные административные панели для управления пользователями, складами, боксами, заказами, скидками и уведомлениями.

## Технологический стек

* **Бэкенд**: Python, Django
* **База данных**: SQLite3
* **Фронтенд**: HTML, CSS, Bootstrap 5
* **Библиотеки Python**:
    * `django-phonenumber-field` для хранения и валидации номеров телефонов.
    * `pillow` для обработки изображений.
    * `qrcode` для генерации QR-кодов для доступа к боксам.
    * `python-dotenv` для управления переменными окружения.
    * `django_crontab` для планирования задач отправки email-уведомлений.

## Структура проекта

```
.
├── manage.py                # Утилита командной строки Django
├── requirements.txt         # Зависимости проекта
├── self_storage/            # Настройки проекта Django и корневая конфигурация URL
│   ├── settings.py
│   └── urls.py
├── storageapp/              # Основная логика приложения
│   ├── models.py            # Модели базы данных (User, Storage, Box, Order и т.д.)
│   ├── views.py             # Представления и бизнес-логика приложения
│   ├── admin.py             # Конфигурация административной панели
│   ├── urls.py              # URL-адреса приложения
│   └── management/commands/ # Пользовательские команды (например, send_email)
├── static/                  # Статические файлы (CSS, изображения)
└── templates/               # HTML-шаблоны
```

## Установка и настройка

1. **Клонируйте репозиторий:**
    ```bash
    git clone https://github.com/vasiliykas/SelfStorage-dvm.git
    cd SelfStorage-dvm
    ```

2. **Создайте и активируйте виртуальное окружение:**
    ```bash
    python -m venv venv
    source venv/bin/activate  # На Windows используйте `venv\Scripts\activate`
    ```

3. **Установите зависимости:**
    ```bash
    pip install -r requirements.txt
    ```

4. **Настройте переменные окружения:**
    Создайте файл `.env` в корневой директории и добавьте учетные данные для email-уведомлений.
    ```env
    YANDEX_MAIL=your_email@yandex.ru
    YANDEX_PASSWORD=your_app_password
    ```

5. **Примените миграции базы данных:**
    ```bash
    python manage.py migrate
    ```

6. **Создайте суперпользователя для доступа к админ-панели:**
    ```bash
    python manage.py createsuperuser
    ```

7. **Запустите сервер разработки:**
    ```bash
    python manage.py runserver
    ```
    Приложение будет доступно по адресу `http://127.0.0.1:8000/`. Админ-панель находится по адресу `http://127.0.0.1:8000/admin/`.

## Использование

### Запуск службы отправки email-уведомлений

Проект включает пользовательскую команду для отправки email-уведомлений об истечении срока аренды. Для ручного запуска:
```bash
python manage.py send_email
```
Эта команда предназначена для периодического выполнения (например, ежедневно) с использованием cron-задач, которые можно настроить с помощью `django-crontab`.

